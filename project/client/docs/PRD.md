# 숫자 맞춤 컬러링 앱 PRD (Product Requirements Document)

## 1. 제품 개요

### 1.1 프로젝트 이름

**숫자 맞춤 컬러링 앱** (Paint by Numbers App)

- 초기 버전: PWA (Progressive Web App)
- 향후 확장: React Native 또는 Flutter 네이티브 앱

### 1.2 프로젝트 목적

사용자들이 **웹과 모바일** 환경에서 숫자에 맞춰 색칠하는 직관적이고 재미있는 게임 경험을 할 수 있는 앱을 제공하여, 스트레스 해소와 집중력 향상을 지원합니다. 특히 시니어 사용자들에게는 두뇌 건강 유지, 집중력 훈련, 성취감 제공을 통해 디지털 포용성을 실현합니다.

**MVP 전략**: PWA로 빠르게 출시하여 시장 검증 후, 필요에 따라 네이티브 앱으로 확장합니다.

### 1.3 핵심 가치 제안

- **즉시 사용 가능**: 앱스토어 없이 브라우저에서 바로 시작
- **쉬운 설치**: "홈 화면에 추가" 한 번으로 앱처럼 사용
- **간단한 게임 규칙**: 숫자에 맞는 색상으로 칠하면 완성
- **명확한 가이드**: 색칠할 색상이 정해져 있어 고민 없이 진행
- **성취감**: 올바르게 칠할 때마다 즉각적인 피드백
- **진행도 확인**: 퍼센트로 완성도를 한눈에 파악
- **시니어 친화적 설계**: 큰 글씨, 명확한 숫자, 쉬운 조작
- **두뇌 건강**: 숫자 인식, 색상 매칭, 집중력 향상에 도움
- **빠른 업데이트**: 자동 업데이트로 항상 최신 버전 사용

---

## 2. 타겟 사용자

### 2.1 주요 타겟

- **연령대**: 10대 ~ 70대 (전 연령층)
- **관심사**: 퍼즐 게임, 스트레스 해소, 집중력 훈련, 두뇌 건강 유지
- **사용 시나리오**: 출퇴근 시간, 여가 시간, 휴식 시간, 가족과의 시간

### 2.2 사용자 페르소나

#### 페르소나 1: 직장인 민지 (28세)

- 출퇴근 시간에 명상 대신 할 수 있는 집중 활동 원함
- 스트레스 해소와 함께 성취감을 느끼고 싶음
- 완성작을 SNS에 공유하고 싶어함
- 하루 10-15분 정도 짧은 세션 선호

#### 페르소나 2: 중학생 지우 (14세)

- 게임 요소가 있는 컬러링에 관심이 많음
- 점수와 랭킹 시스템을 좋아함
- 친구들과 완성 시간을 겨루고 싶어함
- 복잡하고 어려운 도안에 도전하고 싶음

#### 페르소나 3: 은퇴자 순자 (67세)

- 여가 시간이 많고 두뇌 훈련이 되는 활동을 찾고 있음
- 숫자를 따라가면 완성되는 명확한 규칙을 선호
- 손자녀와 함께 누가 빨리 완성하나 경쟁하고 싶음
- 치매 예방과 집중력 유지에 관심이 많음
- 큰 숫자와 직관적인 인터페이스를 선호
- 성공적으로 완성했을 때의 성취감을 중요하게 생각함

---

## 3. 핵심 기능 (Core Features)

### 3.1 MVP 필수 기능

#### 3.1.1 숫자 맞춤 컬러링 캔버스

- **기능**: 숫자가 표시된 영역을 해당 색상으로 칠하는 게임
- **요구사항**:
  - **숫자 표시**: 각 영역에 1~30 사이의 숫자 표시
  - **자동 색상 매칭**: 숫자에 해당하는 색상 자동 연결
  - **터치 색칠**: 영역 터치 시 선택된 색상으로 자동 채우기
  - **정답 검증**: 올바른 색상이면 ✓ 표시, 틀리면 흔들림 효과
  - **숫자 숨김 옵션**: 칠한 영역의 숫자 자동 사라짐 (설정 가능)
  - **줌인/줌아웃**: 핀치, 더블탭으로 세밀한 영역 확대
  - **실수 복구**: 되돌리기(Undo) 기능
  - **진행도 표시**: 상단에 퍼센트 바 (0% → 100%)
  - **시니어 친화 기능**:
    - 큰 숫자 표시 (최소 14pt)
    - 선택된 영역 테두리 강조
    - 올바른 색칠 시 부드러운 애니메이션 효과
    - 확대 시 자동 중앙 정렬
    - "힌트" 버튼: 다음 칠할 영역 깜빡임

#### 3.1.2 숫자-색상 팔레트

- **기능**: 숫자와 색상이 매칭된 팔레트
- **요구사항**:
  - **숫자 레이블**: 각 색상에 숫자 표시 (예: "1" "2" "3")
  - **색상 이름**: 숫자 옆에 색상 이름 표시 (예: "1 빨강")
  - **큰 버튼**: 최소 70x70pt 크기 (시니어 배려)
  - **현재 선택 표시**: 선택된 색상 강조 테두리
  - **남은 영역 개수**: 각 색상별로 칠해야 할 영역 수 표시 (예: "1 빨강 (23)")
  - **완료된 색상**: 모두 칠한 색상은 회색 처리 또는 체크 표시
  - **자동 스크롤**: 다음 칠할 색상으로 자동 이동
  - **시니어 친화 기능**:
    - 색상 간 충분한 여백
    - 고대비 색상 조합
    - 색상 순서 고정 (1번부터 순차적)

#### 3.1.3 게임 모드 및 난이도

- **기능**: 다양한 게임 모드와 난이도 선택
- **요구사항**:
  - **난이도 선택**:
    - **쉬움**: 5-10개 색상, 큰 영역
    - **보통**: 10-20개 색상, 중간 영역
    - **어려움**: 20-30개 색상, 작은 영역
  - **게임 모드**:
    - **일반 모드**: 시간 제한 없이 천천히
    - **타임 어택**: 제한 시간 내 완성
    - **챌린지 모드**: 실수 3회까지만 허용
  - **진행 저장**: 언제든 중단하고 나중에 이어하기
  - **시니어 권장**: "일반 모드 - 쉬움" 기본 선택

#### 3.1.4 도안 라이브러리

- **기능**: 다양한 숫자 맞춤 도안 제공
- **요구사항**:
  - **카테고리별 분류**:
    - 동물 (고양이, 강아지, 새 등)
    - 식물 (꽃, 나무, 선인장 등)
    - 풍경 (산, 바다, 도시 등)
    - 만다라 (기하학 패턴)
    - 전통 문양 (한국 전통 패턴)
    - 명화 (반 고흐, 모네 스타일)
    - 계절 (봄꽃, 단풍, 눈사람 등)
  - **난이도 표시**: 별 개수로 시각화 (★, ★★, ★★★)
  - **예상 시간**: 평균 완성 시간 표시 (10분, 30분, 1시간)
  - **썸네일 미리보기**: 완성된 모습 미리 보기
  - **인기도 순위**: 많이 완성된 도안 우선 표시
  - **시니어 선호 카테고리**:
    - 전통 문양 (태극, 연꽃 등)
    - 계절 풍경 (사계절 자연)
    - 꽃과 정원 (국화, 장미, 백합 등)
    - 새와 동물 (학, 나비, 토끼 등)

#### 3.1.5 저장 및 완성 기능

- **기능**: 작업 중인 작품 및 완성작 저장
- **요구사항**:
  - **로컬 저장**: IndexedDB (진행 상황, 완성작)
  - **클라우드 백업**: Supabase Storage (계정 연동 시)
  - **자동 저장**: 30초마다 진행 상황 자동 저장
  - **완성 축하 화면**:
    - "100% 완성!" 축하 애니메이션
    - 완성 시간 표시
    - 별점 부여 (정확도 기반)
    - 공유하기 버튼
  - **갤러리**: 완성한 작품 모아보기
  - **통계**: 총 완성 작품 수, 평균 완성 시간
  - **오프라인 지원**: Service Worker로 오프라인에서도 작업 가능

#### 3.1.6 도움말 및 튜토리얼 (시니어 필수)

- **기능**: 언제든 접근 가능한 사용 가이드
- **요구사항**:
  - **첫 실행 튜토리얼**:
    1. 숫자가 표시된 영역 설명
    2. 팔레트에서 숫자 맞는 색상 선택
    3. 영역 터치해서 색칠하기
    4. 진행도 확인하기
    5. 완성까지 반복
  - **인터랙티브 가이드**: 실제로 한 번 해보기
  - **힌트 시스템**: "다음에 칠할 곳" 표시
  - **화면별 도움말**: 항상 보이는 "?" 버튼
  - **동영상 가이드**: 1분짜리 설명 영상

#### 3.1.7 PWA 기능 (MVP 필수)

- **기능**: 웹앱을 네이티브 앱처럼 사용
- **요구사항**:
  - **홈 화면 추가**: "홈 화면에 추가" 안내 및 설치 프롬프트
  - **오프라인 작동**: Service Worker로 기본 기능 오프라인 지원
  - **앱 아이콘**: 다양한 크기의 아이콘 (192x192, 512x512)
  - **스플래시 스크린**: 앱 로딩 시 브랜드 화면
  - **전체 화면 모드**: 브라우저 UI 숨김 (standalone 모드)
  - **푸시 알림**: (선택사항) "오늘의 도안" 알림

### 3.2 향후 추가 기능 (Post-MVP)

#### 3.2.1 공유 및 대결 기능

- SNS 공유 (완성 시간, 정확도 포함)
- 친구 초대 및 같은 도안 대결
- 실시간 진행도 비교
- **가족 대결**: 손자녀와 누가 빨리 완성하나 경쟁

#### 3.2.2 고급 게임 모드

- **릴레이 모드**: 여러 사람이 번갈아 가며 완성
- **협동 모드**: 큰 도안을 나눠서 완성
- **블라인드 모드**: 완성 이미지 안 보고 도전
- **퍼펙트 모드**: 한 번도 틀리지 않고 완성

#### 3.2.3 소셜 및 커뮤니티 기능

- 사용자 갤러리
- 좋아요 및 댓글
- 인기 작품 랭킹
- 주간 챌린지/이벤트
- 리더보드 (빠른 완성 시간 순위)

#### 3.2.4 시니어 전용 기능

- **두뇌 건강 모드**: 매일 새로운 도안 추천
- **음성 안내**: "1번 빨간색을 선택하세요" 등 음성 가이드
- **확대경 모드**: 세밀한 영역 작업 시 자동 확대
- **진행 상황 알림**: "오늘 30분 집중했어요!" 등의 격려 메시지
- **프린트 기능**: 완성작을 실제로 인쇄할 수 있는 옵션
- **일일 목표**: 하루 1개 완성 등 목표 설정

#### 3.2.5 수익화

- 프리미엄 도안 (IAP)
- 광고 제거 옵션
- 월간 구독 모델 (무제한 도안)
- 커스텀 도안 생성 (사진 → 숫자 도안 변환)

---

## 4. 기술 스택

### 4.1 프론트엔드

- **프레임워크**: Next.js 14 (App Router)
  - **선택 이유**:
    - Yeon님의 Next.js 전문성 활용으로 빠른 개발 가능
    - 3주 내 MVP 완성 확실성 (하루 1시간, 주말 4시간 = 총 39시간)
    - Claude Code 워크플로우에 최적화
    - HTML Canvas API가 익숙하여 러닝커브 없음
    - PWA 변환이 간단하여 모바일에서도 앱처럼 사용 가능
- **언어**: TypeScript
- **UI 프레임워크**:
  - Tailwind CSS (스타일링)
  - shadcn/ui (컴포넌트 라이브러리)
  - Radix UI (접근성)
- **Canvas 라이브러리**:
  - HTML Canvas API (기본 렌더링)
  - **숫자 맞춤 로직**: 커스텀 구현
    - 영역-숫자 매핑 데이터 구조
    - 색상 검증 알고리즘
    - 진행도 계산 로직
- **상태 관리**:
  - Zustand (간단하고 직관적)
  - 게임 상태 관리 (진행도, 선택된 색상, 타이머 등)
- **PWA 지원**:
  - next-pwa (Service Worker, 오프라인 지원)
  - Web App Manifest (홈 화면 추가)
- **애니메이션**:
  - Framer Motion (축하 애니메이션, 피드백 효과)

### 4.2 백엔드

- **백엔드 서비스**: Supabase (오픈소스 Firebase 대안)
  - **선택 이유**:
    - PostgreSQL 기반으로 복잡한 쿼리 및 관계형 데이터 처리 가능
    - 오픈소스로 벤더 락인 최소화
    - 무료 티어가 넉넉하여 MVP에 적합
- **주요 기능**:
  - **Database**: PostgreSQL (도안, 사용자 진행 상황, 완성 기록)
  - **Authentication**: Supabase Auth (이메일, 소셜 로그인)
  - **Storage**: Supabase Storage (도안 이미지, 완성작 이미지)
  - **Realtime**: PostgreSQL Changes (실시간 대결 모드)
- **CDN**: Cloudflare (이미지 전송 최적화)

### 4.3 개발 도구

- **버전 관리**: Git + GitHub
- **패키지 관리**: npm
- **린팅**:
  - ESLint (Next.js 기본 설정)
  - Prettier (코드 포맷팅)
- **테스팅**:
  - Vitest (유닛 테스트)
  - React Testing Library (컴포넌트 테스트)
- **CI/CD**:
  - Vercel (자동 배포)
  - GitHub Actions (테스트 자동화)
- **개발 환경**:
  - VS Code (추천)
  - Claude Code (주력 개발 도구)
  - Chrome DevTools (디버깅)

### 4.4 데이터베이스 스키마 (Supabase PostgreSQL)

```sql
-- 도안 템플릿 테이블 (하이브리드 방식)
CREATE TABLE templates (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title TEXT NOT NULL,
  category_id UUID REFERENCES categories(id),
  difficulty TEXT CHECK (difficulty IN ('easy', 'medium', 'hard')),
  color_count INTEGER NOT NULL, -- 색상 개수 (5-30)
  region_count INTEGER NOT NULL, -- 총 영역 개수
  estimated_time INTEGER, -- 예상 완성 시간 (분)

  -- 이미지 레이어 (하이브리드 방식)
  image_url TEXT NOT NULL,       -- 디스플레이용 선화 PNG (고해상도)
  color_map_url TEXT,            -- 터치 인식용 컬러맵 PNG (숨겨진 레이어)
  thumbnail_url TEXT NOT NULL,   -- 썸네일 이미지

  -- 영역-숫자 매핑 데이터
  -- {
  --   "viewBox": "0 0 1024 1024",
  --   "regions": [
  --     {"id": "r1", "colorNumber": 1, "mapColor": "#FF0000", "labelX": 100, "labelY": 100},
  --     ...
  --   ]
  -- }
  template_data JSONB NOT NULL,

  -- 숫자-색상 매핑 (사용자 팔레트)
  -- [
  --   {"number": 1, "hex": "#E53935", "name": "빨강", "totalRegions": 15},
  --   {"number": 2, "hex": "#2196F3", "name": "파랑", "totalRegions": 12},
  --   ...
  -- ]
  color_palette JSONB NOT NULL,

  usage_count INTEGER DEFAULT 0,
  average_completion_time INTEGER, -- 평균 완성 시간
  created_at TIMESTAMP DEFAULT NOW()
);

-- 카테고리 테이블
CREATE TABLE categories (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  icon TEXT,
  sort_order INTEGER
);

-- 사용자 진행 상황 테이블
CREATE TABLE user_progress (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id),
  template_id UUID REFERENCES templates(id),
  filled_regions JSONB, -- 칠한 영역 데이터 {region_id: color_number}
  progress INTEGER DEFAULT 0, -- 완성도 (0-100)
  mistakes_count INTEGER DEFAULT 0, -- 실수 횟수
  start_time TIMESTAMP DEFAULT NOW(),
  last_updated TIMESTAMP DEFAULT NOW(),
  is_completed BOOLEAN DEFAULT FALSE,
  completion_time INTEGER, -- 완성 시간 (초)
  UNIQUE(user_id, template_id)
);

-- 완성 기록 테이블
CREATE TABLE completed_artworks (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id),
  template_id UUID REFERENCES templates(id),
  completion_time INTEGER NOT NULL, -- 소요 시간 (초)
  accuracy FLOAT, -- 정확도 (0-100)
  mistakes_count INTEGER DEFAULT 0,
  score INTEGER, -- 게임 점수
  image_url TEXT, -- 완성작 이미지
  completed_at TIMESTAMP DEFAULT NOW()
);

-- Row Level Security 정책
ALTER TABLE user_progress ENABLE ROW LEVEL SECURITY;
ALTER TABLE completed_artworks ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own progress"
  ON user_progress FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can update their own progress"
  ON user_progress FOR UPDATE
  USING (auth.uid() = user_id);

CREATE POLICY "Users can view their own completed artworks"
  ON completed_artworks FOR SELECT
  USING (auth.uid() = user_id);
```

### 4.5 숫자 맞춤 데이터 구조

#### 하이브리드 렌더링 방식 (Happy Color 벤치마킹)

복잡한 도안에서도 성능 저하 없이 부드러운 터치 인식을 위해 **하이브리드 방식**을 채택합니다:

1. **디스플레이 레이어 (PNG)**: 사용자에게 보여주는 고해상도 선화 이미지
   - 복잡한 디테일을 성능 저하 없이 표현
   - 투명 배경 PNG 사용

2. **컬러맵 레이어 (숨겨진 이미지)**: 터치 인식용 색상 지도
   - 각 영역을 고유한 색상으로 칠한 이미지 (예: 영역1=빨강, 영역2=파랑)
   - 사용자에게는 보이지 않음
   - 터치 좌표의 픽셀 색상으로 영역 식별

3. **색칠 레이어 (Canvas)**: 사용자가 색칠한 결과
   - 식별된 영역에 해당 색상 채우기

```
[터치 이벤트] → [컬러맵에서 좌표의 색상 확인] → [영역 식별] → [색칠 레이어에 색상 적용]
```

```typescript
// 도안 템플릿 데이터 구조 (하이브리드 방식)
interface Template {
  id: string;
  title: string;
  difficulty: 'easy' | 'medium' | 'hard';
  colorCount: number; // 5-30
  regionCount: number;
  estimatedTime: number; // 분

  // 이미지 레이어
  imageUrl: string;        // 디스플레이용 선화 PNG (고해상도)
  colorMapUrl: string;     // 터치 인식용 컬러맵 PNG (숨겨진 레이어)
  thumbnailUrl: string;    // 썸네일 이미지

  // 영역-숫자 매핑
  templateData: {
    viewBox: string;       // SVG viewBox (예: "0 0 1024 1024")
    regions: Region[];     // 각 영역 정보
  };

  // 숫자-색상 매핑 (사용자에게 보여줄 색상)
  colorPalette: NumberedColor[];
}

interface Region {
  id: string;
  colorNumber: number;     // 정답 색상 번호 (1, 2, 3...)
  mapColor: string;        // 컬러맵에서의 고유 색상 (터치 인식용, 예: "#FF0000")
  path?: string;           // SVG path (옵션 - 폴백용)
  labelX: number;          // 숫자 레이블 X 좌표
  labelY: number;          // 숫자 레이블 Y 좌표
}

interface NumberedColor {
  number: number;          // 팔레트 번호 (1, 2, 3...)
  hex: string;             // 실제 색상 코드
  name: string;            // 색상 이름 ("빨강", "파랑" 등)
  totalRegions: number;    // 이 색상으로 칠할 총 영역 수
}

// 사용자 진행 상황
interface UserProgress {
  templateId: string;
  filledRegions: {
    [regionId: string]: number; // region_id: filled_color_number
  };
  progress: number; // 0-100
  mistakesCount: number;
  startTime: Date;
  currentColorNumber?: number; // 현재 선택된 색상 번호
}
```

#### 터치 인식 알고리즘

```typescript
// 터치 이벤트 처리 (하이브리드 방식)
function handleTouch(x: number, y: number) {
  // 1. 컬러맵 캔버스에서 해당 좌표의 픽셀 색상 확인
  const ctx = colorMapCanvas.getContext('2d');
  const pixel = ctx.getImageData(x, y, 1, 1).data;
  const mapColor = rgbToHex(pixel[0], pixel[1], pixel[2]);

  // 2. 컬러맵 색상으로 영역 찾기
  const region = regions.find(r => r.mapColor === mapColor);
  if (!region) return; // 빈 영역 (선 위)

  // 3. 현재 선택된 색상과 정답 비교
  if (currentColorNumber === region.colorNumber) {
    // 정답! 색칠 레이어에 색상 적용
    fillRegion(region.id, currentColorNumber);
  } else {
    // 오답! 피드백
    showWrongFeedback();
  }
}
```

---

## 5. 사용자 플로우

### 5.1 신규 사용자 온보딩

```
앱 실행 → "숫자 맞춤 컬러링이란?" 설명 화면
→ 인터랙티브 튜토리얼 (3×3 간단한 도안으로 실습)
→ 난이도 선택 안내 → 첫 도안 추천
```

**시니어 사용자 온보딩 플로우**:

```
앱 실행 → "처음 사용하시나요?" 안내
→ 상세 단계별 튜토리얼 (스킵 불가)
→ 실습 도안으로 직접 체험 (5개 색상, 큰 영역)
→ "잘하셨어요!" 격려 메시지
→ 쉬운 도안 자동 추천
```

### 5.2 기본 게임 플로우

```
도안 선택 → 난이도 확인 → 게임 시작
→ 팔레트에서 숫자 선택 → 같은 숫자 영역 터치
→ 올바르면 ✓, 틀리면 흔들림
→ 100% 완성 → 축하 화면 → 저장/공유
```

### 5.3 진행 중 작품 관리 플로우

```
내 작품 목록 → 진행 중 작품 선택 → 계속하기
또는
완성 작품 갤러리 → 작품 선택 → 공유/삭제
```

---

## 6. 화면 구성 (Wireframe)

### 6.1 주요 화면

#### 홈 화면

- 탭 네비게이션: 도안 선택 / 내 작품 / 통계 / 설정
- 추천 도안 섹션 (난이도별)
- 진행 중인 작품 빠른 접근
- 오늘의 챌린지

#### 도안 선택 화면

- 카테고리 필터 (가로 스크롤)
- 난이도 필터 (별 표시)
- 그리드 레이아웃 썸네일
- 각 도안마다 정보 표시:
  - 색상 개수 (예: "12색")
  - 예상 시간 (예: "15분")
  - 난이도 (별 ★★)

#### 게임 화면 (숫자 맞춤 컬러링)

- **상단 바**:
  - 뒤로가기 버튼
  - 진행도 바 (0% → 100%)
  - 타이머 (선택사항)
  - 메뉴 (저장, 설정, 나가기)
- **중앙**: 캔버스 영역
  - 숫자가 표시된 영역들
  - 줌인/줌아웃 제스처
  - 칠한 영역은 숫자 사라짐 (설정 가능)
- **하단**: 숫자-색상 팔레트
  - 가로 스크롤
  - 각 색상: [숫자] [색상명] (남은 개수)
  - 예: "1 빨강 (23)" "2 파랑 (15)"
  - 선택된 색상 강조
  - 완료된 색상 회색 처리
- **시니어 배려**:
  - 좌측 상단: "힌트" 버튼 (다음 칠할 곳 깜빡임)
  - 우측 상단: 글자 크기 조절 버튼
  - 하단 팔레트: 큰 버튼 (70x70pt)

#### 완성 축하 화면

- "100% 완성!" 애니메이션
- 완성 시간 표시
- 정확도 (실수 횟수)
- 별점 (3-5개)
- 버튼: [다시 하기] [공유하기] [다음 도안]

#### 내 작품 화면

- 탭: 진행 중 / 완성
- 그리드 레이아웃
- 각 작품마다 진행률 표시 (예: 45%)
- 정렬 옵션 (최신순, 진행도순)

#### 통계 화면

- 총 완성 작품 수
- 평균 완성 시간
- 가장 빨리 완성한 도안
- 이번 주 활동 그래프
- 연속 플레이 일수 (streak)

---

## 7. 비기능 요구사항

### 7.1 성능

- **PWA 초기 로딩**: 3초 이내
- **캔버스 렌더링**: 30-45 FPS
- **터치 반응 속도**: 100ms 이내
- **색칠 피드백**: 즉각 (지연 없음)
- **진행 상황 저장**: 2초 이내
- **Lighthouse 점수**: 90+ (Performance, Accessibility)
- **시니어 사용자 고려**:
  - 숫자 가독성 최우선 (큰 폰트, 고대비)
  - 힌트 기능 반응 속도: 즉시

### 7.2 호환성

- **브라우저**:
  - iOS: Safari 13+ (iOS 13+)
  - Android: Chrome 80+, Samsung Internet 12+
  - 데스크톱: Chrome, Edge, Safari
- **PWA 지원**:
  - iOS: 홈 화면 추가, 오프라인 지원
  - Android: 완전한 PWA 경험
- **디바이스**: 모든 스마트폰 및 태블릿
- **해상도**: 반응형 디자인 (320px ~ 1920px)
- **오프라인**: Service Worker로 기본 기능 지원

### 7.3 접근성

- **색각 이상 사용자**:
  - 색상 이름 텍스트 표시 필수
  - 숫자로 구분 가능
- **충분한 터치 영역**: 최소 44x44pt
- **스크린 리더 지원**
- **시니어 사용자 고려사항**:
  - 가독성 높은 큰 폰트 (기본 16pt, 최대 24pt)
  - 고대비 모드 제공
  - 간단하고 직관적인 네비게이션
  - 도움말 쉽게 접근 가능

### 7.4 보안

- **HTTPS 필수**: PWA는 반드시 HTTPS
- **Supabase 보안**:
  - Row Level Security (RLS)
  - API Key 환경 변수 관리
- **브라우저 저장소 보안**:
  - IndexedDB 도메인별 격리
  - 민감한 정보 저장 금지
- **CSP (Content Security Policy)**: XSS 공격 방지

---

## 8. 성공 지표 (KPI)

### 8.1 사용자 지표

- **DAU/MAU**: > 30%
- **재방문율**: 7일 이내 > 50%
- **평균 세션 시간**: > 15분
- **시니어 특화 지표**:
  - 60대 이상 사용자 비율 > 30%
  - 시니어 사용자 평균 세션 시간 > 20분
  - 튜토리얼 완료율 (시니어) > 85%

### 8.2 게임 지표

- **완성률**: 시작한 도안 대비 완성 > 70%
- **평균 완성 시간**: 난이도별 목표 시간 내
- **정확도**: 평균 실수 횟수 < 5회
- **재도전율**: 같은 도안 다시 하기 > 15%
- **힌트 사용률**: 시니어 > 40%, 일반 > 10%

### 8.3 비즈니스 지표

- **앱 설치 수**: 출시 3개월 내 15,000+ (시니어 4,500+)
- **평균 평점**: 4.3+
- **일일 완성 도안 수**: 1,000+
- **시니어 리텐션율**: 30일 > 55%

---

## 9. 프로젝트 일정

### 개발 시간 계산

```
평일: 5일 × 1시간 = 5시간/주
주말: 2일 × 4시간 = 8시간/주
총: 13시간/주
3주: 39시간
```

### Phase 1: MVP 개발 (3주, 39시간)

**Week 1 (13시간): 기반 구축**

- **월-금 (5시간)**: 프로젝트 셋업 및 Supabase 연동
  - Next.js 프로젝트 생성 (1시간)
  - Supabase 프로젝트 및 스키마 (2시간)
  - 기본 레이아웃 구조 (2시간)
- **토-일 (8시간)**: 기본 UI 및 Canvas 프로토타입
  - 홈 화면, 도안 선택 화면 (3시간)
  - Canvas 기초 구현 + 숫자 표시 (3시간)
  - 숫자-색상 팔레트 UI (2시간)

**Week 2 (13시간): 핵심 게임 로직**

- **월-금 (5시간)**: 색칠 및 검증 로직
  - 영역-숫자 매핑 구현 (2시간)
  - 색상 검증 알고리즘 (2시간)
  - 피드백 애니메이션 (1시간)
- **토-일 (8시간)**: 진행 상황 및 저장
  - IndexedDB 로컬 저장 (2시간)
  - Supabase Storage 연동 (2시간)
  - 진행도 계산 로직 (2시간)
  - 되돌리기 기능 (2시간)

**Week 3 (13시간): 완성 및 배포**

- **월-금 (5시간)**: 시니어 친화 기능 + 튜토리얼
  - 큰 버튼, 글자 크기 조절 (2시간)
  - 힌트 시스템 (2시간)
  - 튜토리얼 구현 (1시간)
- **토 (4시간)**: PWA 설정 및 배포
  - next-pwa 설정 (1시간)
  - Web App Manifest (1시간)
  - Vercel 배포 및 테스트 (2시간)
- **일 (4시간)**: 버그 수정 및 최종 테스트
  - 모바일 브라우저 테스트 (2시간)
  - 버그 수정 및 최적화 (2시간)

### Phase 2: 베타 테스트 (1-2주)

- **Week 4-5**: 사용자 테스트 및 피드백
  - PWA URL 공유로 베타 테스터 모집
  - **시니어 사용자 테스트**: 60대 이상 15명 이상
    - 게임 규칙 이해도 테스트
    - 숫자 가독성 검증
    - 완성까지 걸리는 시간 측정
  - 경로당/복지관 1회 시범 워크숍
  - 피드백 수집 및 우선순위 정리

### Phase 3: 개선 및 정식 출시 (1주)

- **Week 6**: 피드백 반영 및 최적화
  - 주요 버그 수정
  - 게임 밸런스 조정 (난이도, 색상 개수)
  - 성능 최적화
  - 최종 테스트 및 정식 출시

### Phase 4: Post-MVP (진행 중)

- 사용자 피드백 기반 기능 추가
- 도안 추가 (주간 5-10개)
- 게임 모드 확장 (타임 어택, 챌린지)
- 소셜 기능 (대결 모드)

---

## 10. 리스크 및 제약사항

### 10.1 기술적 리스크

- **영역-숫자 매핑 복잡도**: ~~SVG path 또는 픽셀 기반 선택~~ → **하이브리드 방식으로 해결**
  - **해결 방안 (Happy Color 벤치마킹)**:
    - 디스플레이 레이어: 고해상도 선화 PNG (복잡한 디테일 표현)
    - 컬러맵 레이어: 각 영역을 고유 색상으로 칠한 숨겨진 이미지
    - 터치 좌표의 픽셀 색상으로 영역 식별 (O(1) 성능)
    - SVG path는 폴백용으로만 사용

- **Canvas 성능**: 복잡한 도안에서 렌더링 성능 저하
  - **완화 방안**:
    - **하이브리드 방식**: PNG 이미지 렌더링은 매우 빠름
    - 레이어 분리 (디스플레이 PNG, 컬러맵, 색칠 레이어)
    - requestAnimationFrame 사용
    - 색칠 시에만 Canvas 업데이트

- **숫자 가독성**: 작은 영역에 숫자 표시 어려움
  - **완화 방안**:
    - 쉬움 난이도는 큰 영역만 사용
    - 줌인 시 숫자 크기 자동 조정
    - 너무 작은 영역은 도안 제작 시 제외

- **컬러맵 제작**: 각 영역을 고유 색상으로 정확히 칠해야 함
  - **완화 방안**:
    - 자동 컬러맵 생성 도구 개발 (PNG → 컬러맵 변환)
    - Flood Fill 알고리즘으로 영역 자동 분리
    - 수동 보정 도구 제공

- **PWA 인식 부족**: 시니어 사용자가 설치 어려워함
  - **완화 방안**:
    - 경로당 워크숍에서 직접 도움
    - 설치 가이드 동영상
    - QR 코드로 쉬운 접근

### 10.2 비즈니스 리스크

- **경쟁 앱**: 기존 Paint by Numbers 앱들과 경쟁
  - **완화 방안**: 시니어 친화적 UX, 한국어 콘텐츠, 게임 요소 강화

- **도안 제작 비용**: 양질의 도안 제작에 시간과 비용
  - **완화 방안**: 초기 무료 도안 50개, 커뮤니티 도안 공유, AI 도안 생성 도구

- **수익화**: 초기 무료 모델
  - **완화 방안**: 프리미엄 도안, 광고 제거, 월간 구독

### 10.3 제약사항

- **저작권**: 도안 이미지 저작권 확보 필요
- **도안 품질**: 숫자-색상 매핑의 정확성
- **개인정보**: 사용자 데이터 처리 시 개인정보보호법 준수

---

## 11. 추가 고려사항

### 11.1 도안 제작 가이드라인

#### 기본 규칙
- **색상 개수**:
  - 쉬움: 5-10개
  - 보통: 10-20개
  - 어려움: 20-30개
- **영역 크기**: 최소 30x30px (숫자 표시 가능)
- **색상 선택**: 고대비, 구분 가능한 색상
- **숫자 배치**: 영역 중앙, 읽기 쉬운 폰트

#### 하이브리드 방식 도안 제작 (3개 파일 필요)

1. **디스플레이 이미지 (display.png)**
   - 사용자에게 보여줄 고해상도 선화 이미지
   - 투명 배경 PNG (알파 채널 포함)
   - 권장 해상도: 1024x1024 ~ 2048x2048
   - 선 두께: 2-4px (확대 시 깨지지 않도록)

2. **컬러맵 이미지 (colormap.png)**
   - 터치 인식용 숨겨진 레이어
   - 각 영역을 고유한 색상으로 채움 (예: 영역1=#FF0000, 영역2=#00FF00...)
   - 선화 부분은 검정색(#000000) 또는 투명 처리
   - 동일 크기, 동일 위치 정렬 필수
   - 안티앨리어싱 OFF (경계 색상 혼합 방지)

3. **썸네일 이미지 (thumbnail.png)**
   - 완성된 모습 미리보기
   - 권장 크기: 256x256 ~ 512x512

#### 컬러맵 색상 규칙
```
영역 1: #FF0001 (빨강 계열)
영역 2: #00FF02 (초록 계열)
영역 3: #0000FF (파랑)
영역 4: #FFFF00 (노랑)
...
최대 256개 영역까지 고유 색상 할당 가능
```

#### 자동 변환 도구
- PNG/JPG → 컬러맵 자동 생성 API 제공
- 색상 추출 + 영역 분리 + 컬러맵 생성
- 복잡한 도안은 수동 보정 필요

### 11.2 품질 관리

- **코드 리뷰**: PR 단위, ESLint, Prettier
- **자동화 테스트**:
  - 색상 검증 로직 유닛 테스트
  - 진행도 계산 테스트
  - E2E 테스트 (주요 플로우)
- **성능 모니터링**:
  - Vercel Analytics
  - Lighthouse 점수 > 90
  - Canvas 렌더링 프레임률 측정

### 11.3 사용자 지원

- FAQ 페이지 (게임 규칙 설명)
- 버그 리포트 채널
- **시니어 사용자 전용 지원**:
  - 전화 고객센터
  - 동영상 튜토리얼
  - 오프라인 사용 설명서

### 11.4 마케팅 전략 (시니어 타겟 + PWA 활용)

- **PWA 장점 활용**:
  - **QR 코드**: 포스터, 전단지에 배치
  - **URL 공유**: 카카오톡, 문자로 링크 전송
  - **즉시 플레이**: 설치 없이 바로 시작 가능

- **온라인 채널**:
  - 네이버 블로그, 카페에서 URL 공유
  - YouTube 시니어 채널 광고
  - 카카오톡 오픈채팅방

- **오프라인 채널**:
  - **경로당/복지관 워크숍**:
    - QR 코드 스캔 체험
    - "오늘의 도안" 함께 완성하기
  - **실버타운 데모 행사**:
    - 태블릿으로 대화면 시연
  - **가족 단위 이벤트**:
    - 조부모-손자녀 완성 시간 대결

- **입소문 마케팅**:
  - 완성작 전시회
  - 시니어 컬러링 대회
  - SNS 공유 시 앱 URL 포함

---

## 12. 문서 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
| --- | --- | --- | --- |
| 1.0 | 2026-01-22 | Yeon | 초안 작성 (자유 컬러링) |
| 1.1 | 2026-01-22 | Yeon | 60대 여성 타겟층 추가 |
| 1.2 | 2026-01-22 | Yeon | 시니어 친화 기능 반영 |
| 2.0 | 2026-01-22 | Yeon | 기술 스택 변경 (Flutter, Supabase) |
| 3.0 | 2026-01-22 | Yeon | 최종 기술 스택: Next.js + PWA |
| 4.0 | 2026-01-23 | Yeon | 게임 방식 변경: 자유 컬러링 → 숫자 맞춤 컬러링 (Paint by Numbers) |
| **5.0** | **2026-01-29** | **Yeon** | **하이브리드 렌더링 방식 도입 (Happy Color 벤치마킹): 디스플레이 PNG + 컬러맵 레이어** |

---

## 부록

### A. 참고 자료

- **Next.js 개발**:
  - Next.js 14 공식 문서
  - App Router 가이드
  - TypeScript 설정
- **PWA 개발**:
  - next-pwa 문서
  - Web App Manifest
  - Service Worker 패턴
- **Canvas API**:
  - MDN Canvas Tutorial
  - 영역 감지 알고리즘
  - Canvas 성능 최적화
- **Supabase 백엔드**:
  - Supabase 공식 문서
  - Next.js + Supabase 통합
  - PostgreSQL 쿼리 최적화
- **Paint by Numbers 참고**:
  - 기존 앱 UX 분석
  - 도안 제작 도구 연구
  - 게임 밸런스 연구
- **시니어 UX 가이드**:
  - WCAG 2.1 접근성 가이드라인
  - 고령자 모바일 앱 디자인
  - 게임화(Gamification) 원칙

### B. 용어 정의

- **Paint by Numbers**: 숫자에 맞춰 색칠하는 방식
- **영역-숫자 매핑**: 각 영역에 할당된 숫자 정보
- **색상 검증**: 올바른 색상으로 칠했는지 확인
- **진행도**: 전체 영역 중 칠한 비율 (0-100%)
- **MVP**: Minimum Viable Product
- **KPI**: Key Performance Indicator
- **PWA**: Progressive Web App
- **Service Worker**: 백그라운드 스크립트
- **IndexedDB**: 브라우저 NoSQL 데이터베이스
- **Canvas API**: HTML5 그래픽 렌더링 API
